<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>PIX â€“ CobranÃ§a</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
    margin: 0;
    font-family: Arial;
    background: #0b0f19;
    color: white;
    text-align: center;
}

.header {
    background: #121a2f;
    padding: 20px;
    font-size: 22px;
    font-weight: bold;
}

.container {
    padding: 20px;
}

input {
    width: 90%;
    font-size: 26px;
    padding: 15px;
    border-radius: 10px;
    border: none;
    text-align: center;
}

button {
    width: 90%;
    margin-top: 15px;
    padding: 18px;
    font-size: 22px;
    background: #00e676;
    border: none;
    border-radius: 12px;
    font-weight: bold;
}

#qr img {
    margin-top: 20px;
    width: 280px;
    border-radius: 15px;
    background: white;
    padding: 10px;
}

#pix {
    background: #121a2f;
    margin-top: 20px;
    padding: 15px;
    border-radius: 10px;
    font-size: 12px;
    word-break: break-all;
}
</style>
</head>

<body>

<div class="header">
ðŸ’³ PIX â€“ C6 Bank
</div>

<div class="container">
<input id="valor" type="number" step="0.01" placeholder="Digite o valor">
<button onclick="gerarPix()">Cobrar</button>

<div id="qr"></div>
<div id="pix"></div>
</div>

<script>
const pixBase = "00020101021126330014br.gov.bcb.pix0111377793998695204000053039865802BR5925ZAYAN DOUX DE SOUZA OLIVE6009SAO PAULO622905251KHPGDNVGBS01VTEG5JDK7R2S6304";

function gerarPix(){
    let v = document.getElementById("valor").value;
    if(!v || v <= 0){
        alert("Digite um valor vÃ¡lido");
        return;
    }

    let valor = parseFloat(v).toFixed(2);
    let tamanho = valor.length.toString().padStart(2, "0");

    let payload = pixBase.replace("5802BR", "54"+tamanho+valor+"5802BR");

    let crc = calcularCRC(payload);
    let pixFinal = payload + crc;

    document.getElementById("pix").innerText = pixFinal;

    let qrURL = "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=" + encodeURIComponent(pixFinal);
    document.getElementById("qr").innerHTML = "<img src='"+qrURL+"'>";
}

function calcularCRC(str){
    let crc = 0xFFFF;
    for(let i=0;i<str.length;i++){
        crc ^= str.charCodeAt(i)<<8;
        for(let j=0;j<8;j++){
            if(crc & 0x8000) crc=(crc<<1)^0x1021;
            else crc<<=1;
            crc&=0xFFFF;
        }
    }
    return crc.toString(16).toUpperCase().padStart(4,"0");
}
</script>

</body>
</html>